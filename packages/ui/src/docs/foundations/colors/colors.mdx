import { Meta, Unstyled } from "@storybook/addon-docs/blocks";
import { tokens } from "../../../../tokens";
import "./colors.css";

<Meta title="基礎/カラー" />

export const ColorCard = ({ name, value, cssVar }) => (
  <div className="color-card">
    <div
      className="color-chip"
      style={{ backgroundColor: value }}
    />
    <div className="color-info">
      <h4 className="color-level">{name}</h4>
      <code className="color-value">{value}</code>
      {cssVar && <code className="color-var">{cssVar}</code>}
    </div>
  </div>
);

export const ColorScale = ({ title, colors, prefix }) => (
  <div className="color-group">
    <h3>{title}</h3>
    <div className="color-grid">
      {Object.entries(colors).map(([key, token]) => (
        <ColorCard
          key={key}
          name={key}
          value={token.$value}
          cssVar={prefix ? `--${prefix}-${key}` : undefined}
        />
      ))}
    </div>
  </div>
);

<Unstyled>
<div className="prose">

# Colors

このデザインシステムでは、**OKLCH カラーモデル**を使用しています。
カラートークンは **Style Dictionary** で管理され、階層構造で定義されています。

---

<div className="color-section">

## Primitiveカラー

ブランドカラーの基本スケールです。

プリミティブカラーはカラーの基盤となる基本的な色で構成され、多様なウェブサイトごとに統一感のあるカラースキームを作成するために利用します。
各カラーは広範なカラー設定を導出するための色相と明度の段階で構成されています。
プリミティブカラーを参考とし、色相、明度、彩度などを調整しウェブサイトのトーン＆マナーとして相応しいカラースキームを構築します。

<ColorScale
  title="Blue"
  colors={tokens.primitive.blue}
  prefix="primitive-blue"
/>

</div>

<div className="color-section">

## ニュートラルカラー

グレー、ホワイトなどのニュートラルカラーは、背景、ディバイダー、ボーダーなど、さまざまなデザイン要素に対して共通カラーとして使用されます。

<div className="color-group">
  <h3>White / Black</h3>
  <div className="color-grid">
    <ColorCard
      name="White"
      value={tokens.neutral.white.$value}
      cssVar="--neutral-white"
    />
    <ColorCard
      name="Black"
      value={tokens.neutral.black.$value}
      cssVar="--neutral-black"
    />
  </div>
</div>

<ColorScale
  title="Solid Gray"
  colors={tokens.neutral["solid-gray"]}
  prefix="neutral-solid-gray"
/>

<ColorScale
  title="Opacity Gray"
  colors={tokens.neutral["opacity-gray"]}
  prefix="neutral-opacity-gray"
/>

</div>

<div className="color-section">

## Semanticベースカラー

セマンティックカラーは、デザインスタイルやUIの種別を問わず特定のセマンティクス（意味や目的）が割り当てられたカラーです。

これらのカラーは特定の情報や文脈で意味を伝えるために使用され、情報伝達上の機能的な役割を持っています。

緑といえばサクセス、赤といえばエラー、というように、一貫性のある特定の意味を持った視覚的な共通言語となり、メンタルモデルに影響を与えます。

必要なコントラスト比を保つため、その使用用途によって明度や彩度の異なるカラーが必要となる場合があります。特に背景色が白または黒以外の場合には必ずコントラスト比を確認してください。

- アイコンや枠線など非テキストに使用する場合は、背景色とのコントラスト比を3:1以上にする必要がある。
- テキストに使用する場合は背景色とのコントラスト比を4.5:1以上にする必要がある。
- 各セマンティクスは色相を保ちさえすれば、ブランドやサービスのスタイルガイドに応じて明度・彩度を調整できる。つまり、エラーを緑で示すことはできないが、コントラスト比を確保できる範囲でサクセスの緑を明るくできる。

### サクセス（Success）

成功、安全、完了などを意味する。

<ColorScale
  title="Success"
  colors={tokens.semantic.success}
  prefix="success"
/>

### エラー（Error）

失敗やエラーのほか、危険情報や制約条件の提示など注意喚起を意味する。

<ColorScale
  title="Error"
  colors={tokens.semantic.error}
  prefix="error"
/>

### 警告（Warning）

警告や禁止事項などを意味する。

<ColorScale
  title="Warning Yellow"
  colors={tokens.semantic["warning-yellow"]}
  prefix="warning-yellow"
/>

<ColorScale
  title="Warning Orange"
  colors={tokens.semantic["warning-orange"]}
  prefix="warning-orange"
/>

</div>

---

## 使用方法

### Tailwind CSSクラス

```tsx
<div className="bg-primary text-primary-foreground">
  Primary Button
</div>

<div className="bg-success text-success-foreground">
  Success
</div>

<div className="bg-warning text-warning-foreground">
  Warning
</div>
```

### CSS変数

```css
.custom-element {
  background: var(--primary);
  color: var(--primary-foreground);
  border: 1px solid var(--border);
}
```

---

## ファイル構成

```text
packages/ui/
├── tokens/
│   ├── index.ts                # TypeScript エクスポート
│   ├── primitive/
│   │   └── colors.json         # ブランドカラー + ステータスベース
│   ├── neutral/
│   │   └── colors.json         # white, black, gray scales
│   └── semantic/
│       ├── colors.light.json   # ライトモード
│       └── colors.dark.json    # ダークモード
├── scripts/
│   └── build-tokens.mts        # ビルドスクリプト
└── src/styles/
    ├── tokens.generated.css      # 生成（:root）
    └── tokens.dark.generated.css # 生成（.dark）
```

</div>
</Unstyled>
